#!/bin/bash

echo "ğŸ” DemoTechApp: Pre-commit Structure Validation"
echo "================================================"

# Check for backend logic in project root
echo "ğŸ“‹ Checking for backend logic in project root..."
if find . -name "*.ts" -o -name "*.js" | grep -q "ai-systems\|core-systems\|advanced-features"; then
    echo "âŒ ERROR: Backend logic found in project root!"
    echo "   Backend logic should be referenced, not copied."
    exit 1
fi

# Check for root intelligence files
echo "ğŸ“‹ Checking for root intelligence files..."
if [ -f "README.md" ] && grep -q "RepoClone Intelligence" README.md; then
    echo "âŒ ERROR: Root intelligence files found in project!"
    echo "   Projects should not contain root intelligence files."
    exit 1
fi

# Check for backend connector
echo "ğŸ“‹ Checking for backend connector..."
if [ ! -f "backend-connector.ts" ]; then
    echo "âŒ ERROR: Missing backend-connector.ts!"
    echo "   Projects must have a backend connector."
    exit 1
fi

# Check project schema
echo "ğŸ“‹ Checking project schema..."
if [ ! -f "PROJECT_SCHEMA.md" ]; then
    echo "âŒ ERROR: Missing PROJECT_SCHEMA.md!"
    echo "   Projects must have a project schema."
    exit 1
fi

# Check project structure rules
echo "ğŸ“‹ Checking project structure rules..."
if [ ! -f "PROJECT_STRUCTURE_RULES.md" ]; then
    echo "âŒ ERROR: Missing PROJECT_STRUCTURE_RULES.md!"
    echo "   Projects must have structure rules."
    exit 1
fi

echo "âœ… DemoTechApp: Structure validation passed!"
echo "ğŸ¯ Project follows RepoClone template schema" 